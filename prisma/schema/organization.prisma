model Organization {
  id               String             @id @default(uuid())
  name             String
  slug             String             @unique
  email            String             @unique
  phone            String?
  website          String?
  logo             String?
  logoPublicId     String?
  status           OrganizationStatus @default(ACTIVE)
  maxEmployees     Int                @default(10)
  currentEmployees Int                @default(0)
  addressId        String
  address          Address            @relation(fields: [addressId], references: [id])
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  user             User               @relation(fields: [id], references: [id])

  departments Department[]
  employee    Employee[]
  branches    Branch[]

  @@map("organizations")
}

model Department {
  id             String       @id @default(uuid())
  slug           String       @unique
  name           String
  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id])
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt

  employees Employee[]
  branch    Branch?    @relation(fields: [branchId], references: [id])
  branchId  String?

  @@map("departments")
}

model Address {
  id            String         @id @default(uuid())
  line1         String
  city          String
  state         String
  country       String
  postalCode    String
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  organizations Organization[]
  employees     Employee[]
  branches      Branch[]

  @@map("address")
}

model Branch {
  id             String       @id @default(ulid())
  name           String
  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id])
  addressId      String
  address        Address      @relation(fields: [addressId], references: [id])
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt

  department Department[]

  @@map("branches")
}
